import Mathlib

open Matrix

/-- The real 2×2 orthogonal group as a subgroup of the units of 2×2 real matrices. -/
def O2 : Set (Units (Matrix (Fin 2) (Fin 2) ℝ)) :=
  { U | U.val * U.val.transpose = 1 }

/-- The special orthogonal group (rotations) inside O(2). -/
def SO2 : Set (Units (Matrix (Fin 2) (Fin 2) ℝ)) :=
  { U | U.val * U.val.transpose = 1 ∧ U.val.det = 1 }

/-- For any fixed improper orthogonal matrix A (determinant -1), O(2) is generated by SO(2) and A. -/
theorem O2_generated_by_SO2_and_A (A : Units (Matrix (Fin 2) (Fin 2) ℝ))
  (hA_orth : A.val * A.val.transpose = 1) (hA_improper : A.val.det = -1) :
  Subgroup.closure (SO2 ∪ {A}) = { U : Units (Matrix (Fin 2) (Fin 2) ℝ) | U.val * U.val.transpose = 1 } := by sorry
