import Mathlib

open Matrix

/-- The group O(2) of real 2×2 orthogonal matrices, viewed as units of Matrix (Fin 2) (Fin 2) ℝ. -/
def O2 : Set (Units (Matrix (Fin 2) (Fin 2) ℝ)) :=
  { U | U.val.transpose * U.val = 1 }

/-- The subgroup SO(2) of rotations (determinant 1) inside O(2). -/
def SO2 : Set (Units (Matrix (Fin 2) (Fin 2) ℝ)) :=
  { U | U ∈ O2 ∧ Matrix.det U.val = 1 }

/-- For any improper orthogonal matrix A (orthogonal with determinant -1), O(2) is generated by SO(2) together with A. -/
theorem o2_generated_by_so2_and_improper (A : Units (Matrix (Fin 2) (Fin 2) ℝ))
  (hA_orth : A.val.transpose * A.val = 1)
  (hA_det : Matrix.det A.val = -1) :
  Subgroup.closure (SO2 ∪ {A}) = Subgroup.closure O2 := by sorry